<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>pika.gpt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-yellow-100 min-h-screen flex items-center justify-center relative">

<div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg flex flex-col">

  <h1 class="text-4xl font-bold text-center mb-2">⚡ pika.gpt</h1>
  <p id="modeLabel" class="text-center text-gray-600 mb-2">Normal Mode</p>

  <img 
    id="pikachuImg"
    src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-iii/firered-leafgreen/25.png"
    class="w-28 mx-auto mb-2 pixelated"
    alt="Pikachu"
  />

  <button 
    onclick="toggleSprite()"
    class="mx-auto mb-3 text-sm bg-yellow-200 hover:bg-yellow-300 px-4 py-1 rounded-xl"
  >
    Switch Pikachu Style
  </button>

  <button 
    id="backBtn"
    onclick="setNormalMode()" 
    class="hidden mx-auto mb-3 text-sm bg-yellow-300 hover:bg-yellow-400 px-4 py-1 rounded-xl font-semibold"
  >
    Switch to Normal Language
  </button>

  <div id="chat" class="flex-1 overflow-y-auto border rounded-xl p-3 mb-4 space-y-2 text-sm"></div>

  <div id="typing" class="text-yellow-600 italic mb-2 hidden">pika is typing...</div>

  <div class="flex gap-2">
    <input
      id="userInput"
      placeholder="Type something..."
      class="flex-1 border rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-yellow-400"
    />
    <button
      onclick="send()"
      class="bg-yellow-400 hover:bg-yellow-500 font-bold px-4 rounded-xl"
    >
      Send
    </button>
  </div>
</div>

<div class="fixed bottom-2 right-3 text-xs text-gray-600 opacity-70 select-none">
  Made by Nasknight23
</div>

<style>
.pixelated { image-rendering: pixelated; }
</style>

<script>
  const chat = document.getElementById("chat");
  const typing = document.getElementById("typing");
  const modeLabel = document.getElementById("modeLabel");
  const backBtn = document.getElementById("backBtn");
  const pikaImg = document.getElementById("pikachuImg");

  const pixelSrc = "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-iii/firered-leafgreen/25.png";
  const normalSrc = "https://assets.pokemon.com/assets/cms2/img/pokedex/full/025.png";

  let pixelMode = true;
  let pikaMode = false;

  const pikaParts = ["pi", "ka", "chu", "pika", "ka", "pi"];

  const englishReplies = [
    "Hello!",
    "I understand you!",
    "That makes sense!",
    "Pikachu is listening ⚡",
    "Got it!"
  ];

  function toggleSprite() {
    pixelMode = !pixelMode;

    if (pixelMode) {
      pikaImg.src = pixelSrc;
      pikaImg.classList.add("pixelated");
    } else {
      pikaImg.src = normalSrc;
      pikaImg.classList.remove("pixelated");
    }
  }

  function addMessage(text, who) {
    const div = document.createElement("div");
    div.className = who === "user" 
      ? "text-right text-gray-800" 
      : "text-left text-yellow-600 font-semibold";
    div.textContent = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }

  function toPikaLanguage(text) {
    let result = "";
    for (let char of text) {
      if (char === " ") result += "   ";
      else result += pikaParts[Math.floor(Math.random() * pikaParts.length)] + " ";
    }
    return result.trim();
  }

  function randomEnglish() {
    return englishReplies[Math.floor(Math.random() * englishReplies.length)];
  }

  function setPikaMode() {
    pikaMode = true;
    modeLabel.textContent = "Pika Language Mode";
    backBtn.classList.remove("hidden");
  }

  function setNormalMode() {
    pikaMode = false;
    modeLabel.textContent = "Normal Mode";
    backBtn.classList.add("hidden");
  }

  function send() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if (!text) return;

    if (text.toLowerCase() === "pikachu") {
      setPikaMode();
      addMessage("⚡ Pika language activated! ⚡", "bot");
      input.value = "";
      return;
    }

    input.value = "";

    if (pikaMode) {
      const pikaText = toPikaLanguage(text);
      addMessage(pikaText, "user");
    } else {
      addMessage(text, "user");
    }

    typing.classList.remove("hidden");

    setTimeout(() => {
      typing.classList.add("hidden");

      if (pikaMode) {
        addMessage(randomEnglish(), "bot");
      } else {
        addMessage("pika!", "bot");
      }
    }, 600 + Math.random() * 500);
  }

  document.getElementById("userInput").addEventListener("keydown", e => {
    if (e.key === "Enter") send();
  });
</script>

</body>
</html>
